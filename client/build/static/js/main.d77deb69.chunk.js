(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),o=n.n(s),i=n(4),r=n.n(i),a=(n(10),n(2));n(11);function u(e){fetch("http://localhost:9000/posts",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return e.map((function(e,t){return Object(c.jsxs)("div",{className:"post",children:[Object(c.jsx)("p",{children:e.time}),Object(c.jsx)("p",{children:e.user}),Object(c.jsx)("p",{children:e.text})]},t)}))})).then((function(t){return e(t)}))}var l=function(){var e=Object(s.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(s.useState)(!1),r=Object(a.a)(i,2),l=r[0],j=r[1],h=Object(s.useState)(null),d=Object(a.a)(h,2),b=d[0],f=d[1],O=Object(s.useState)(""),p=Object(a.a)(O,2),x=p[0],g=p[1],m=Object(s.useState)(""),v=Object(a.a)(m,2),C=v[0],S=v[1],y=Object(s.useState)(""),k=Object(a.a)(y,2),N=k[0],w=k[1],P=Object(s.useState)(""),L=Object(a.a)(P,2),T=L[0],E=L[1],J=Object(s.useState)([]),A=Object(a.a)(J,2),I=A[0],F=A[1],B=Object(s.useState)([]),M=Object(a.a)(B,2),U=M[0],D=M[1],Y=Object(s.useState)([]),q=Object(a.a)(Y,2),z=q[0],G=q[1],H=Object(s.useState)(null),K=Object(a.a)(H,2),Q=K[0],R=K[1];return Object(s.useEffect)((function(){var e;e=f,fetch("http://localhost:9000/checkLogin",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){"yes"!==t.loggedIn?e(null):e(t.username)})),u(F),function(e){fetch("http://localhost:9000/users",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e(t)}))}(D)}),[]),Object(s.useEffect)((function(){b&&(g(""),S(""),o(!1))}),[b]),Object(s.useEffect)((function(){document.body.style.overflowY=n||l?"hidden":"scroll"}),[n,l]),Object(s.useEffect)((function(){G(U.filter((function(e){return!!e.toLowerCase().includes(N.toLowerCase())})).map((function(e,t){return Object(c.jsx)("div",{onClick:function(){R(Q===e?null:e)},className:Q===e?"selected user":"user",children:Object(c.jsx)("p",{children:e})},t)})))}),[U,N,Q]),Object(s.useEffect)((function(){var e,t;Q?(e=Q,t=F,fetch("http://localhost:9000/posts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){return e.map((function(e,t){return Object(c.jsxs)("div",{className:"post",children:[Object(c.jsx)("p",{children:e.time}),Object(c.jsx)("p",{children:e.user}),Object(c.jsx)("p",{children:e.text})]},t)}))})).then((function(e){return t(e)}))):u(F)}),[Q]),Object(c.jsxs)("div",{className:"App",children:[n&&Object(c.jsxs)("div",{className:"enterCredentials",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{value:x,onChange:function(e){return g(e.target.value)}}),Object(c.jsx)("input",{type:"password",value:C,onChange:function(e){return S(e.target.value)}})]}),Object(c.jsx)("button",{onClick:function(){var e,t,n;e=x,t=C,n=f,fetch("http://localhost:9000/createAccount",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.text()})).then((function(t){"invalid"===t?alert("Invalid information"):"username taken"===t?alert("Username is already taken"):"createAccount"===t&&n(e)}))},children:"Create Account"}),Object(c.jsx)("button",{onClick:function(){var e,t,n;e=x,t=C,n=f,fetch("http://localhost:9000/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.text()})).then((function(t){"login"!==t?alert("Login failed"):n(e)}))},children:"Log In"}),Object(c.jsx)("button",{onClick:function(){return o(!1)},children:"Cancel"})]}),!b&&!n&&Object(c.jsx)("button",{onClick:function(){return o(!0)},children:"Log in or create account"}),b&&!l&&Object(c.jsx)("button",{onClick:function(){return e=f,void fetch("http://localhost:9000/logout",{credentials:"include"}).then((function(e){return e.text()})).then((function(t){"logout"!==t?alert("Something went wrong"):e(null)}));var e},children:"Log out"}),b&&Object(c.jsxs)("p",{children:["Logged in as ",b]}),b&&!l&&Object(c.jsx)("button",{onClick:function(){return j(!0)},children:"Make new post"}),l&&Object(c.jsxs)("div",{className:"makePost",children:[Object(c.jsx)("textarea",{value:T,onChange:function(e){return E(e.target.value)}}),Object(c.jsx)("button",{onClick:function(){var e,t;t=E,(e=T).length>300?alert("Post is too long! Limit the length to 300 characters"):fetch("http://localhost:9000/newPost",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})}).then((function(e){return e.text()})).then((function(e){"newPost"!==e?alert("Something went wrong"):t("")})),j(!1)},children:"Post"}),Object(c.jsx)("button",{onClick:function(){return j(!1)},children:"Cancel"})]}),Object(c.jsxs)("div",{className:"main-container",children:[Object(c.jsxs)("div",{className:"user-container",children:[Object(c.jsx)("p",{children:"Users"}),Object(c.jsx)("input",{value:N,onChange:function(e){return w(e.target.value)}}),Object(c.jsx)("div",{className:"centered",children:z})]}),Object(c.jsx)("div",{className:"post-container",children:Object(c.jsxs)("div",{className:"centered",children:[Object(c.jsx)("p",{children:Q&&"Posts of user "+Q||"All posts"}),Object(c.jsx)("div",{className:"centered",children:I})]})})]})]})},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),o(e),i(e)}))};r.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(l,{})}),document.getElementById("root")),j()}},[[12,1,2]]]);
//# sourceMappingURL=main.d77deb69.chunk.js.map