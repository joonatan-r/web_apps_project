(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),i=n.n(s),o=n(4),r=n.n(o),a=(n(10),n(2));n(11);function l(e){fetch(window.location.href+"posts",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return u(e)})).then((function(t){return e(t)}))}function u(e){var t=e.map((function(e,t){return Object(c.jsxs)("div",{className:"post",children:[Object(c.jsxs)("div",{className:"post-info",children:[Object(c.jsx)("p",{children:e.user}),Object(c.jsx)("p",{children:d(e.time)})]}),Object(c.jsx)("div",{className:"post-content",children:Object(c.jsx)("p",{children:e.text})})]},t)}));return t.length?t:[Object(c.jsx)("div",{className:"post",children:Object(c.jsx)("div",{className:"post-content",children:Object(c.jsx)("p",{children:"No posts"})})},0)]}function d(e){var t=new Date(e),n=t.getHours(),c=t.getMinutes();return j(n)+":"+j(c)+"\n"+t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()}function j(e){return e<9?"0"+e:""+e}var h=function(){var e=Object(s.useState)(!1),t=Object(a.a)(e,2),n=t[0],i=t[1],o=Object(s.useState)(!1),r=Object(a.a)(o,2),d=r[0],j=r[1],h=Object(s.useState)(null),b=Object(a.a)(h,2),f=b[0],O=b[1],p=Object(s.useState)(""),g=Object(a.a)(p,2),x=g[0],v=g[1],m=Object(s.useState)(""),w=Object(a.a)(m,2),C=w[0],N=w[1],S=Object(s.useState)(""),y=Object(a.a)(S,2),k=y[0],L=y[1],P=Object(s.useState)(""),T=Object(a.a)(P,2),E=T[0],I=T[1],J=Object(s.useState)([]),A=Object(a.a)(J,2),F=A[0],M=A[1],D=Object(s.useState)([]),H=Object(a.a)(D,2),U=H[0],B=H[1],Y=Object(s.useState)([]),q=Object(a.a)(Y,2),z=q[0],G=q[1],K=Object(s.useState)(null),Q=Object(a.a)(K,2),R=Q[0],V=Q[1];return Object(s.useEffect)((function(){var e;e=O,fetch(window.location.href+"checkLogin",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){"yes"!==t.loggedIn?e(null):e(t.username)})),l(M),function(e){fetch(window.location.href+"users",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e(t)}))}(B)}),[]),Object(s.useEffect)((function(){f&&(v(""),N(""),i(!1))}),[f]),Object(s.useEffect)((function(){document.body.style.overflowY=n||d?"hidden":"scroll"}),[n,d]),Object(s.useEffect)((function(){G(U.filter((function(e){return!!e.toLowerCase().includes(k.toLowerCase())})).map((function(e,t){return Object(c.jsx)("div",{onClick:function(){V(R===e?null:e)},className:R===e?"selected user":"user",children:Object(c.jsx)("p",{children:e})},t)})))}),[U,k,R]),Object(s.useEffect)((function(){var e,t;R?(e=R,t=M,fetch(window.location.href+"posts",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).then((function(e){return e.json()})).then((function(e){return u(e)})).then((function(e){return t(e)}))):l(M)}),[R]),Object(c.jsxs)("div",{className:"App",children:[n&&Object(c.jsxs)("div",{className:"enterCredentials",children:[Object(c.jsxs)("div",{className:"inputs",children:[Object(c.jsx)("input",{placeholder:"Username",value:x,onChange:function(e){return v(e.target.value)}}),Object(c.jsx)("input",{placeholder:"Password",type:"password",value:C,onChange:function(e){return N(e.target.value)}})]}),Object(c.jsxs)("div",{className:"btns",children:[Object(c.jsx)("button",{onClick:function(){var e,t,n;e=x,t=C,n=O,fetch(window.location.href+"createAccount",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.text()})).then((function(t){"invalid"===t?alert("Invalid information"):"username taken"===t?alert("Username is already taken"):"createAccount"===t&&n(e)}))},children:"Create Account"}),Object(c.jsx)("button",{onClick:function(){var e,t,n;e=x,t=C,n=O,fetch(window.location.href+"login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.text()})).then((function(t){"login"!==t?alert("Login failed"):n(e)}))},children:"Log In"}),Object(c.jsx)("button",{onClick:function(){v(""),N(""),i(!1)},children:"Cancel"})]})]}),!f&&!n&&Object(c.jsx)("div",{className:"notLoggedHeader",children:Object(c.jsx)("button",{onClick:function(){return i(!0)},children:"Log in or create account"})}),f&&Object(c.jsxs)("div",{className:"loggedHeader",children:[!d&&Object(c.jsx)("button",{onClick:function(){return j(!0)},children:"Make new post"}),!d&&Object(c.jsx)("button",{onClick:function(){return e=O,void fetch(window.location.href+"logout",{credentials:"include"}).then((function(e){return e.text()})).then((function(t){"logout"!==t?alert("Something went wrong"):e(null)}));var e},children:"Log out"}),Object(c.jsxs)("p",{children:["Logged in as ",f]})]}),d&&Object(c.jsxs)("div",{className:"makePost",children:[Object(c.jsx)("textarea",{rows:10,value:E,onChange:function(e){return I(e.target.value)}}),Object(c.jsxs)("div",{className:"btns",children:[Object(c.jsx)("button",{onClick:function(){var e,t;t=I,(e=E).length>300?alert("Post is too long! Limit the length to 300 characters"):fetch("http://localhost:9000/newPost",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e})}).then((function(e){return e.text()})).then((function(e){"newPost"!==e?alert("Something went wrong"):t("")})),j(!1)},children:"Post"}),Object(c.jsx)("button",{onClick:function(){j(!1),I("")},children:"Cancel"})]})]}),Object(c.jsxs)("div",{className:"main-container",children:[Object(c.jsxs)("div",{className:"user-container",children:[Object(c.jsx)("h1",{children:"Users"}),Object(c.jsx)("input",{placeholder:"Search",value:k,onChange:function(e){return L(e.target.value)},className:"searchInput"}),Object(c.jsx)("div",{className:"centered",children:z})]}),Object(c.jsx)("div",{className:"post-container",children:Object(c.jsxs)("div",{className:"centered",children:[Object(c.jsxs)("h1",{children:["Showing: ",R||"All posts"]}),Object(c.jsx)("div",{className:"centered",children:F})]})})]})]})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),s(e),i(e),o(e)}))};r.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root")),b()}},[[12,1,2]]]);
//# sourceMappingURL=main.690adae6.chunk.js.map